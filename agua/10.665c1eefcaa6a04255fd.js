(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{sIJP:function(t,e,n){"use strict";n.r(e);var i=n("Valr"),c=n("QJY3"),r=n("MnXN"),o=n("DUip"),a=n("JEAp"),s=n("cUzu"),b=n("AytR"),u=n("TYT/"),l=function(){function t(t,e){this.http=t,this.router=e,this.url=b.a.api_despachoaguainteligente+"dispatcher/",this.options={headers:null},this.options.headers=new s.c({api_token:sessionStorage.getItem("api_token")})}return t.prototype.get=function(t){var e=this;return void 0===t?this.http.get(this.url,this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)})):this.http.get(this.url+"?id="+t.toString(),this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)}))},t.prototype.get_paginate=function(t,e){var n=this;return this.http.get(this.url+"paginate?size="+t.toString()+"&page="+e.toString(),this.options).toPromise().then((function(t){return t})).catch((function(t){n.handledError(t)}))},t.prototype.delete=function(t){var e=this;return this.http.delete(this.url+"?id="+t.toString(),this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)}))},t.prototype.getBackUp=function(){var t=this;return this.http.get(this.url+"backup",this.options).toPromise().then((function(t){return t})).catch((function(e){t.handledError(e)}))},t.prototype.post=function(t){var e=this;return this.http.post(this.url,JSON.stringify(t),this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)}))},t.prototype.put=function(t){var e=this;return this.http.put(this.url,JSON.stringify(t),this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)}))},t.prototype.masiveLoad=function(t){var e=this;return this.http.post(this.url+"masive_load",JSON.stringify({data:t}),this.options).toPromise().then((function(t){return t})).catch((function(t){e.handledError(t)}))},t.prototype.handledError=function(t){console.log(t),sessionStorage.clear(),this.router.navigate(["/login"])},t.\u0275fac=function(e){return new(e||t)(u.ac(s.a),u.ac(o.b))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),p=function(){return function(){}}(),h=n("s4wE"),d=n("ic5g");function g(t,e){1&t&&u.Ob(0,"span",41)}function f(t,e){if(1&t){var n=u.Tb();u.Sb(0,"tr",36),u.ec("click",(function(){u.vc(n);var t=e.$implicit;return u.gc().selectDispatcher(t)})),u.Sb(1,"td",37),u.Cc(2,g,1,0,"span",38),u.Rb(),u.Sb(3,"td"),u.Ec(4),u.Rb(),u.Sb(5,"td",39),u.Ob(6,"qr-code",40),u.Rb(),u.Rb()}if(2&t){var i=e.$implicit,c=u.gc();u.Ab(2),u.mc("ngIf",c.dispatcherSelected===i),u.Ab(2),u.Fc(i.code),u.Ab(2),u.mc("value",i.code)}}function v(t,e){1&t&&(u.Sb(0,"button",42),u.Ec(1,"Primera"),u.Rb())}function S(t,e){if(1&t){var n=u.Tb();u.Sb(0,"button",43),u.ec("click",(function(){return u.vc(n),u.gc().goToPage(1)})),u.Ec(1,"Primera"),u.Rb()}}function m(t,e){if(1&t){var n=u.Tb();u.Sb(0,"button",44),u.ec("click",(function(){u.vc(n);var t=u.gc();return t.goToPage(1*t.currentPage-1)})),u.Ec(1),u.Rb()}if(2&t){var i=u.gc();u.Ab(1),u.Fc(1*i.currentPage-1)}}function R(t,e){if(1&t){var n=u.Tb();u.Sb(0,"button",45),u.ec("click",(function(){u.vc(n);var t=u.gc();return t.goToPage(1*t.currentPage+1)})),u.Ec(1),u.Rb()}if(2&t){var i=u.gc();u.Ab(1),u.Fc(1*i.currentPage+1)}}function y(t,e){if(1&t){var n=u.Tb();u.Sb(0,"button",46),u.ec("click",(function(){u.vc(n);var t=u.gc();return t.goToPage(t.lastPage)})),u.Ec(1,"\xdaltima"),u.Rb()}}function P(t,e){1&t&&(u.Sb(0,"button",47),u.Ec(1,"\xdaltima"),u.Rb())}function k(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div",48),u.Sb(1,"h4",49),u.Ec(2,"Datos:"),u.Rb(),u.Sb(3,"button",50),u.ec("click",(function(){return e.$implicit.dismiss("Cross click")})),u.Sb(4,"span"),u.Ec(5,"\xd7"),u.Rb(),u.Rb(),u.Rb(),u.Sb(6,"div",51),u.Sb(7,"div",0),u.Sb(8,"div",2),u.Sb(9,"div",52),u.Sb(10,"label",53),u.Ec(11,"C\xf3digo"),u.Rb(),u.Sb(12,"div",54),u.Sb(13,"input",55),u.ec("ngModelChange",(function(t){return u.vc(n),u.gc().dispatcherSelected.code=t})),u.Rb(),u.Rb(),u.Rb(),u.Sb(14,"div",52),u.Sb(15,"label",53),u.Ec(16,"QR"),u.Rb(),u.Sb(17,"div",54),u.Ob(18,"qr-code",40),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(19,"div",56),u.Sb(20,"button",57),u.ec("click",(function(){return e.$implicit.close("Guardar click")})),u.Ec(21,"Guardar"),u.Rb(),u.Sb(22,"button",58),u.ec("click",(function(){return e.$implicit.close("Cancelar click")})),u.Ec(23,"Cancelar"),u.Rb(),u.Rb()}if(2&t){var i=u.gc();u.Ab(13),u.mc("ngModel",i.dispatcherSelected.code),u.Ab(5),u.mc("value",i.dispatcherSelected.code)}}var D=[{path:"",component:function(){function t(t,e,n){this.modalService=t,this.toastr=e,this.dispatcherDataService=n,this.dispatchers=[],this.dispatcherSelected=new p,this.currentPage=1,this.lastPage=1,this.showDialog=!1,this.recordsByPage=5}return t.prototype.ngOnInit=function(){this.goToPage(1)},t.prototype.selectDispatcher=function(t){this.dispatcherSelected=t},t.prototype.goToPage=function(t){t<1||t>this.lastPage?this.toastr.errorToastr("La p\xe1gina solicitada no existe.","Error"):(this.currentPage=t,this.getDispatchers())},t.prototype.getDispatchers=function(){var t=this;this.dispatchers=[],this.dispatcherSelected=new p,this.dispatcherDataService.get_paginate(this.recordsByPage,this.currentPage).then((function(e){t.dispatchers=e.data,t.lastPage=e.last_page})).catch((function(t){return console.log(t)}))},t.prototype.newDispatcher=function(t){this.dispatcherSelected=new p,this.openDialog(t)},t.prototype.editDispatcher=function(t){void 0!==this.dispatcherSelected.id?this.openDialog(t):this.toastr.errorToastr("Debe seleccionar un registro.","Error")},t.prototype.deleteDispatcher=function(){var t=this;void 0!==this.dispatcherSelected.id?this.dispatcherDataService.delete(this.dispatcherSelected.id).then((function(e){t.toastr.successToastr("Registro Borrado satisfactoriamente.","Borrar"),t.getDispatchers()})).catch((function(t){return console.log(t)})):this.toastr.errorToastr("Debe seleccionar un registro.","Error")},t.prototype.backup=function(){this.dispatcherDataService.getBackUp().then((function(t){var e=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"}),n=new Date;Object(a.saveAs)(e,n.toLocaleDateString()+"_Dispatchers.json")})).catch((function(t){return console.log(t)}))},t.prototype.toCSV=function(){this.dispatcherDataService.get().then((function(t){var e="id;code\n";t.forEach((function(t){e+=t.id+";"+t.code+"\n"}));var n=new Blob([e],{type:"text/plain;charset=utf-8"}),i=new Date;Object(a.saveAs)(n,i.toLocaleDateString()+"_Dispatchers.csv")})).catch((function(t){return console.log(t)}))},t.prototype.decodeUploadFile=function(t){var e=this,n=new FileReader;t.target.files&&t.target.files.length>0&&(n.readAsDataURL(t.target.files[0]),n.onload=function(){var t=n.result.toString().split(",")[1],i=JSON.parse(decodeURIComponent(escape(atob(t))));e.dispatcherDataService.masiveLoad(i).then((function(t){e.goToPage(e.currentPage)})).catch((function(t){return console.log(t)}))})},t.prototype.openDialog=function(t){var e=this;this.modalService.open(t,{centered:!0}).result.then((function(t){"Guardar click"===t&&(void 0===e.dispatcherSelected.id?e.dispatcherDataService.post(e.dispatcherSelected).then((function(t){e.toastr.successToastr("Datos guardados satisfactoriamente.","Nuevo"),e.getDispatchers()})).catch((function(t){return console.log(t)})):e.dispatcherDataService.put(e.dispatcherSelected).then((function(t){e.toastr.successToastr("Registro actualizado satisfactoriamente.","Actualizar"),e.getDispatchers()})).catch((function(t){return console.log(t)})))}),(function(t){}))},t.\u0275fac=function(e){return new(e||t)(u.Nb(r.e),u.Nb(h.a),u.Nb(l))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-dispatcher"]],decls:59,vars:11,consts:[[1,"row"],[1,"col-12","text-right"],[1,"col-12"],["role","toolbar",1,"btn-toolbar"],["role","group",1,"btn-group","mr-2"],["type","button","title","Actualizar",1,"btn","btn-primary",3,"click"],[1,"fas","fa-sync"],["type","button","title","Nuevo",1,"btn","btn-success",3,"click"],[1,"fas","fa-file"],["type","button","title","Editar",1,"btn","btn-warning",3,"click"],[1,"fas","fa-edit"],["type","button","title","Eliminar",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],["type","button","title","BackUp",1,"btn","btn-dark",3,"click"],[1,"fas","fa-download"],["type","button","title","Exportar CSV",1,"btn","btn-dark",3,"click"],[1,"fas","fa-file-csv"],["type","button","title","Cargar",1,"btn","btn-dark",3,"click"],[1,"fas","fa-upload"],["type","file","accept",".json",1,"form-control",3,"hidden","change"],["uploadInput",""],[1,"table","table-hover","mt-2"],[3,"click",4,"ngFor","ngForOf"],["type","button","class","btn btn-light","title","Primera P\xe1gina","disabled","",4,"ngIf"],["type","button","class","btn btn-light","title","Primera P\xe1gina",3,"click",4,"ngIf"],["type","button","class","btn btn-light","title","P\xe1gina Anterior",3,"click",4,"ngIf"],["type","button","title","P\xe1gina Actual",1,"btn","btn-primary"],["type","button","class","btn btn-light","title","P\xe1gina Siguiente",3,"click",4,"ngIf"],["type","button","class","btn btn-light","title","\xdaltima P\xe1gina",3,"click",4,"ngIf"],["type","button","class","btn btn-light","title","\xdaltima P\xe1gina","disabled","",4,"ngIf"],[1,"input-group"],[1,"input-group-prepend"],["type","button","title","Ir a la P\xe1gina",1,"input-group-text","btn","btn-success",3,"click"],["type","number","placeholder","Ir a la P\xe1gina",1,"form-control",3,"min","max"],["goToPageNumber",""],["content",""],[3,"click"],[1,"text-right"],["class","far fa-hand-point-right",4,"ngIf"],[1,"text-center"],["size","300","errorCorrectionLevel","L",3,"value"],[1,"far","fa-hand-point-right"],["type","button","title","Primera P\xe1gina","disabled","",1,"btn","btn-light"],["type","button","title","Primera P\xe1gina",1,"btn","btn-light",3,"click"],["type","button","title","P\xe1gina Anterior",1,"btn","btn-light",3,"click"],["type","button","title","P\xe1gina Siguiente",1,"btn","btn-light",3,"click"],["type","button","title","\xdaltima P\xe1gina",1,"btn","btn-light",3,"click"],["type","button","title","\xdaltima P\xe1gina","disabled","",1,"btn","btn-light"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"form-group","row"],["for","code",1,"col-4","col-form-label"],[1,"col-8"],["type","text","id","code","name","code","placeholder","code",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(t,e){if(1&t){var n=u.Tb();u.Sb(0,"div",0),u.Sb(1,"h1",1),u.Ec(2," Despachadores "),u.Rb(),u.Rb(),u.Sb(3,"div",0),u.Sb(4,"div",2),u.Sb(5,"div",3),u.Sb(6,"div",4),u.Sb(7,"button",5),u.ec("click",(function(){return e.goToPage(e.currentPage)})),u.Ob(8,"i",6),u.Rb(),u.Rb(),u.Sb(9,"div",4),u.Sb(10,"button",7),u.ec("click",(function(){u.vc(n);var t=u.uc(58);return e.newDispatcher(t)})),u.Ob(11,"i",8),u.Rb(),u.Sb(12,"button",9),u.ec("click",(function(){u.vc(n);var t=u.uc(58);return e.editDispatcher(t)})),u.Ob(13,"i",10),u.Rb(),u.Rb(),u.Sb(14,"div",4),u.Sb(15,"button",11),u.ec("click",(function(){return e.deleteDispatcher()})),u.Ob(16,"i",12),u.Rb(),u.Rb(),u.Sb(17,"div",4),u.Sb(18,"button",13),u.ec("click",(function(){return e.backup()})),u.Ob(19,"i",14),u.Rb(),u.Sb(20,"button",15),u.ec("click",(function(){return e.toCSV()})),u.Ob(21,"i",16),u.Rb(),u.Sb(22,"button",17),u.ec("click",(function(){return u.vc(n),u.uc(25).click()})),u.Ob(23,"i",18),u.Rb(),u.Sb(24,"input",19,20),u.ec("change",(function(t){return e.decodeUploadFile(t)})),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(26,"div",0),u.Sb(27,"div",2),u.Sb(28,"table",21),u.Sb(29,"thead"),u.Sb(30,"tr"),u.Sb(31,"th"),u.Ec(32,"Seleccionado"),u.Rb(),u.Sb(33,"th"),u.Ec(34,"C\xf3digo"),u.Rb(),u.Sb(35,"th"),u.Ec(36,"QR"),u.Rb(),u.Rb(),u.Rb(),u.Sb(37,"tbody"),u.Cc(38,f,7,3,"tr",22),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(39,"div",0),u.Sb(40,"div",2),u.Sb(41,"div",3),u.Sb(42,"div",4),u.Cc(43,v,2,0,"button",23),u.Cc(44,S,2,0,"button",24),u.Cc(45,m,2,1,"button",25),u.Sb(46,"button",26),u.Ec(47),u.Rb(),u.Cc(48,R,2,1,"button",27),u.Cc(49,y,2,0,"button",28),u.Cc(50,P,2,0,"button",29),u.Rb(),u.Sb(51,"div",30),u.Sb(52,"div",31),u.Sb(53,"button",32),u.ec("click",(function(){u.vc(n);var t=u.uc(56);return e.goToPage(t.value)})),u.Ec(54,"Ir a"),u.Rb(),u.Rb(),u.Ob(55,"input",33,34),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Cc(57,k,24,2,"ng-template",null,35,u.Dc)}2&t&&(u.Ab(24),u.mc("hidden",!0),u.Ab(14),u.mc("ngForOf",e.dispatchers),u.Ab(5),u.mc("ngIf",1===e.currentPage),u.Ab(1),u.mc("ngIf",1!==e.currentPage),u.Ab(1),u.mc("ngIf",e.currentPage>1),u.Ab(2),u.Fc(e.currentPage),u.Ab(1),u.mc("ngIf",e.currentPage<e.lastPage),u.Ab(1),u.mc("ngIf",e.currentPage!==e.lastPage),u.Ab(1),u.mc("ngIf",e.currentPage===e.lastPage),u.Ab(5),u.nc("min",1),u.nc("max",e.lastPage))},directives:[i.k,i.l,d.a,c.b,c.f,c.i],styles:[""]}),t}()}],E=function(){function t(){}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(D)],o.e]}),t}();n.d(e,"DispatcherModule",(function(){return w}));var w=function(){function t(){}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[r.e,l],imports:[[i.b,E,c.c,d.b]]}),t}()}}]);